import { Scene, Circle, Rectangle, Color, RadialGradient }
    from "https://unpkg.com/pencil.js/dist/pencil.esm.js";

const scene = new Scene(undefined, {
    fill: new Color(),
});
const { width, height } = scene;
scene.cursorPosition.set(scene.center).subtract(0, height / 4);

const sun = new Circle(scene.center.add(0, height / 2), 100, {
    fill: "orange",
});

const ocean = new Rectangle([0, height / 2], width, height / 2, {
    // Use a radial-gradient as fill option
    fill: new RadialGradient(undefined, sun.radius * 3, {
        0: sun.options.fill, // From the sun's color
        1: "#28488f", // To the ocean's blue from earlier
    }),
});

scene
    .add(sun, ocean)
    .startLoop()
    .on("draw", () => {
        sun.position.lerp(scene.cursorPosition, 0.05);

        const setting = (sun.position.y - (height / 4)) / (height / 2);
        scene.options.fill
            .set("#45a8ff")
            .lerp("#150a1b", setting);

        // Change gradient position to follow the sun
        ocean.options.fill.position
            .set(sun.position.x, (height / 2) - sun.position.y);
    }, true);
